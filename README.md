# FastAPI Book Management API Deployment 

## Overview

This project is a RESTful API built with FastAPI for managing a book collection. It provides comprehensive CRUD (Create, Read, Update, Delete) operations for books with proper error handling, input validation, and documentation. This code based is forked from [HNG 12 DEV-BOT](https://github.com/hng12-devbot/fastapi-book-project)

This copy is forced on Deploying this sample APi to an Nginx Web server USing Git Actions

## Features

- 📚 Book management (CRUD operations) from HNG12
- ✅ Input validation using Pydantic models
- 📝 API documentation (auto-generated by FastAPI)
- 🔒 CORS middleware enabled
- 📝 Terraform Script to Set Up Nginx Server on AWS EC2 `terraform_to_AWS_nginx\main.tf`
- 🧪 Complete test coverage CI `.github\workflows\test.yml`
- ✅ Complete Deployment to App Server `.github\workflows\deploy.yml`



## Project Structure

```
fastapi-book-project/
├── api/
│   ├── db/
│   │   ├── __init__.py
│   │   └── schemas.py      # Data models and in-memory database
│   ├── routes/
│   │   ├── __init__.py
│   │   └── books.py        # Book route handlers
│   └── router.py           # API router configuration
├── core/
│   ├── __init__.py
│   └── config.py           # Application settings
├── tests/
│   ├── __init__.py
│   └── test_books.py  # API endpoint tests
|
|___terraform_to_AWS_nginx/
|   |__ main.tf   #terraform to set up nginx server
|
├── main.py                 # Application entry point
├── requirements.txt        # Project dependencies
└── README.md
```


## Installation

1. Clone the repository:

```bash
git clone https://github.com/ChisomJude/fastapi-book-project.git
cd fastapi-book-project
```

2. Create a virtual environment:

```bash
python -m venv venv
source venv/bin/activate  # On Windows: venv\Scripts\activate
```

3. Install dependencies:

```bash
pip install -r requirements.txt
```

## Running the Application

1. Start the server:

```bash
uvicorn api.main:app --reload
```

2. Access the API documentation:

- Swagger UI: http://localhost:8000/docs


## API Endpoints

### Books

- `GET /api/v1/books/` - Get all books
- `GET /api/v1/books/{book_id}` - Get a specific book
- `POST /api/v1/books/` - Create a new book
- `PUT /api/v1/books/{book_id}` - Update a book
- `DELETE /api/v1/books/{book_id}` - Delete a book

### Health Check

- `GET /healthcheck` - Check API status

## Book Schema

```json
{
  "id": 1,
  "title": "Book Title",
  "author": "Author Name",
  "publication_year": 2024,
  "genre": "Fantasy"
}
```

## Running Tests
on push, the CI run using Pytest test the ap[]
```bash
pytest
```
## Deployment 
- On Push, it connects to the server and pull the recent commit
- Ensure your server ip and SSH Key is added to Repository secret

## Set up the Server using Terraform:
 - Set up your AWS cred
 - Navigate to terraform_to_AWS_nginx
 - Navigate to Ip address generated and try http://ip/docs

 ```bash
 cd terraform_to_AWS_nginx
 aws configure  #enter your access key and secret on prompt
 terraform init
 terraform plan 
 terraform apply
 ```

